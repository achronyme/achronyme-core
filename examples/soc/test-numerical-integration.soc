// ============================================================================
// Phase 4I: Numerical Analysis - Integration Tests
// ============================================================================

println("=== NUMERICAL ANALYSIS - INTEGRATION TESTS ===")
println("")

// Define test functions
let f1 = (x: Number) => x * x
let f2 = (x: Number) => x * x * x
let f3 = (x: Number) => sin(x)

// ============================================================================
// TRAPEZOIDAL RULE
// ============================================================================

println("--- TRAPEZOIDAL RULE ---")

// Test 1: Integral of x^2 from 0 to 1 should be 1/3 ≈ 0.333...
let int1 = integral(f1, 0, 1)
println("integral(x², 0, 1) =", int1, " (expected: 0.333...)")

// Test 2: Integral of x^3 from 0 to 2 should be 4
let int2 = integral(f2, 0, 2)
println("integral(x³, 0, 2) =", int2, " (expected: 4)")

// Test 3: Integral of sin(x) from 0 to π should be 2
let int3 = integral(f3, 0, pi())
println("integral(sin(x), 0, π) =", int3, " (expected: 2)")

println("")

// ============================================================================
// SIMPSON'S RULE
// ============================================================================

println("--- SIMPSON'S RULE ---")

// Test 4: Simpson's rule for x^2 from 0 to 1
let simp1 = simpson(f1, 0, 1)
println("simpson(x², 0, 1) =", simp1, " (expected: 0.333...)")

// Test 5: Simpson's rule for x^3 from 0 to 2
let simp2 = simpson(f2, 0, 2)
println("simpson(x³, 0, 2) =", simp2, " (expected: 4)")

// Test 6: Simpson's rule for sin(x) from 0 to π
let simp3 = simpson(f3, 0, pi())
println("simpson(sin(x), 0, π) =", simp3, " (expected: 2)")

println("")

// ============================================================================
// ROMBERG INTEGRATION
// ============================================================================

println("--- ROMBERG INTEGRATION ---")

// Test 7: Romberg integration for x^2 from 0 to 1
let rom1 = romberg(f1, 0, 1)
println("romberg(x², 0, 1) =", rom1, " (expected: 0.333...)")

// Test 8: Romberg integration for x^3 from 0 to 2
let rom2 = romberg(f2, 0, 2)
println("romberg(x³, 0, 2) =", rom2, " (expected: 4)")

println("")

// ============================================================================
// ADAPTIVE QUADRATURE
// ============================================================================

println("--- ADAPTIVE QUADRATURE ---")

// Test 9: Adaptive quadrature for x^2 from 0 to 1
let quad1 = quad(f1, 0, 1)
println("quad(x², 0, 1) =", quad1, " (expected: 0.333...)")

// Test 10: Adaptive quadrature for x^3 from 0 to 2
let quad2 = quad(f2, 0, 2)
println("quad(x³, 0, 2) =", quad2, " (expected: 4)")

println("")
println("=== INTEGRATION TESTS COMPLETED ===")
